{% extends 'jdamainapp/base.html' %}
{% load crispy_forms_tags %}

{% block content %}

<div class="row justify-content-center align-items-center">
    <div class="col-sm-12">
        {% if messages %}
        {% for message in messages %}
        <div class="alert alert-{{message.tags}} alert-dismissible fade show text-center" id="msg_alert" role="alert">
            <a class="close" data-dismiss="alert">x</a>
            <i class="text-muted mr-5">{{message|safe}}</i>
        </div>
        {%endfor%}
        {%endif%}
    </div>
</div>

<nav aria-label="breadcrumb">
    <ol class="breadcrumb my_breadcrumb_bg">
        <li class="breadcrumb-item"><a href="{% url 'jdapublicationsapp_home' %}" class="text-light">Home</a></li>
        <!--li class="breadcrumb-item"><a href="{% url 'jdapublicationsapp_dept' %}" class="text-light">Our Department</a></li-->
        <li class="breadcrumb-item"><a href="{% url 'jdapublicationsapp_pubs' %}" class="text-light">Our Publications</a></li>
        <li class="breadcrumb-item"><a href="{% url 'jdapublicationsapp_entry' %}" class="text-light">Publications Entry</a></li>
        <li class="breadcrumb-item"><a href="{% url 'jdapublicationsapp_listing' %}" class="text-light font-weight-bold">Publications Edit</a></li>
    </ol>
</nav>

<div class="card shadow-sm p-2 mb-3 bg-white rounded">
    <div class="card-header">
        <div class="text-center">
            <h5 class="text-muted"><i class="far fa-newspaper my_info_txt"></i> Publication Listing</h5>
        </div>
    </div>

    <div class="card-body">
    <table id="publication_listing" class="table table-responsive-sm table-striped table-bordered dt-responsive nowrap" style="max-width:100%">
        <thead>
            <tr>
                <th>#</th>
                <th>Author</th>
                <th>Publication Date</th>
                <th>Research Category</th>
                <th>Research Type</th>
                <th>Subject</th>
                <th>Publication Desc</th>
                <th>Company name</th>
                <th>File Name</th>
                <th>Upload Date</th>
                <th>Entered By</th>
                <th>View File</th>
                <th>Edit Pub Entry</th>
                <th>Delete Pub Entry</th>
            </tr>
        </thead>
        <tbody>
            {% for i in publication_listing%}
            <tr>
                <td>{{i.pk}}</td>
                <td>{{i.author}}</td>
                <td>{{i.publication_date}}</td>
                <td>{{i.research_category}}</td>
                <td>{{i.research_type}}</td>
                <td>{{i.subject}}</td>
                <td class="Xtext-wrap">{{i.publication_desc}}</td>
                <td>{{i.company}}</td>
                <td>{{ i.file_name.name}}</td>
                <td>{{i.uploaded_at}}</td>
                <td>{{i.edited_by}}</td>
                <td><a href="{{ i.file_name.url }}"><button class="btn btn-info btn-sm">View</button></a></td>
                <td><a href="{% url 'jdapublicationsapp_edit' i.pk %}"><button class="btn btn-sm btn-warning">Edit</button></a></td>
                <td>
                    <form class="form-inline" method="post" action="{% url 'jdapublicationsapp_delete' i.pk %}" onsubmit="return confirm('Are you sure you want delete this publication?');">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor%}
        </tbody>
    </table>
    </div>
    <div class="card-footer text-muted">
       <small>As of {{rpt_date}}</small>
    </div>
</div>




{% endblock %}

